{"version":3,"sources":["webpack:///webpack/bootstrap 504d19902a7454a62bc3","webpack:///./src/tests.js","webpack:///./src/index.js","webpack:///./~/dift/lib/index.js","webpack:///./~/bit-vector/lib/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;ACtCA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,oCAAmC;AACnC,iCAAgC,YAAY;AAC5C,iCAAgC,YAAY;AAC5C,oCAAmC,iBAAiB;AACpD,oCAAmC;;AAEnC,8BAA6B,eAAe;AAC5C,8BAA6B;AAC7B;AACA;AACA;AACA;AACA,8BAA6B,0BAA0B;AACvD;;;;;;;;;;;;AClEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sBAAqB;;AAErB;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAc,QAAQ;AACtB,eAAc,QAAQ;;AAEtB;AACA,iBAAgB,SAAS;;AAEzB;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA,MAAK;AACL;;AAEA,MAAK;AACL;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA,gBAAe,6BAA6B;AAC5C;AACA;AACA;AACA;AACA,gBAAe,kBAAkB;AACjC;AACA;AACA,uBAAsB,gEAAgE;AACtF;AACA;AACA;AACA;;;AAGA;AACA,sB;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA,2BAA0B;;AAE1B,4BAA2B;;AAE3B;AACA;AACA;;AAEA;AACA;AACA,uBAAsB;;AAEtB,MAAK;AACL;;AAEA,MAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;AACA,sDAAqD,eAAe;AACpE;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6DAA4D,kBAAkB;AAC9E;;AAEA,sBAAqB;AACrB;AACA;AACA;AACA;;AAEA,UAAS;AACT;AACA,2B;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,8BAA6B;;AAE7B;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,M;;AAEA,2BAA0B;;AAE1B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,MAAK;AACL;AACA;AACA;;AAEA,MAAK;AACL;AACA,kC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kG;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,oBAAmB,qBAAqB,O;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,8CAA6C;;AAE7C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;;;;;;;;;ACnaA;;AAEA;AACA;AACA,EAAC;AACD;;AAEA;;AAEA;AACA;AACA;;AAEA,gBAAe;AACf;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,SAAQ,sBAAsB;AAC9B;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB,8BAA8B;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,sBAAqB,SAAS;AAC9B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,yB;;;;;;;;;AC7JA;;AAEA;AACA;AACA,EAAC;AACD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,yB","file":"tests.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 504d19902a7454a62bc3\n **/","var sprezzatura \t\t= require('./index.js')\n\n\nvar vDomToHtmlString \t= sprezzatura.vDomToHtmlString\nvar vDomToDom \t\t\t= sprezzatura.vDomToDom\nvar updateDom \t\t\t= sprezzatura.updateDom\n\n\nvar Div = 'div'\nvar A   = 'a'\nvar Br  = 'br'\n\n\nvar parent = document.getElementById('tests')\n\n\nfunction domToHtmlString (dom) {\n\tif (!dom) return undefined\n\tvar div = document.createElement('div')\n\tdiv.appendChild(dom)\n\treturn div.innerHTML\n}\n\n\nfunction clearNode (node) {\n\twhile (node.firstChild) {\n\t    node.removeChild(node.firstChild)\n\t}\n}\n\n\nfunction checkUpdate (parent, vDomA, vDomB) {\n\tclearNode(parent)\n\tvar dom = vDomToDom(vDomA)\n\tvar vDomB2 = vDomB instanceof Array ? vDomB.slice() : vDomB\n\tparent.appendChild(dom)\n\tupdateDom(vDomA, vDomB, dom, parent)\n\treturn domToHtmlString(parent.firstChild) === vDomToHtmlString(vDomB2)\n}\n\n\nconsole.log([\n\n\tvDomToDom(false) === undefined,\n\tvDomToDom(null) === undefined,\n\tvDomToDom(undefined) === undefined,\n\tvDomToDom([]) === undefined,\n\n\tdomToHtmlString(vDomToDom('a')) === '<span>a</span>',\n\tdomToHtmlString(vDomToDom(1)) === '<span>1</span>',\n\tdomToHtmlString(vDomToDom(0)) === '<span>0</span>',\n\t\n\tdomToHtmlString(vDomToDom([Br])) === '<br>',\n\tdomToHtmlString(vDomToDom([Div, {}, []])) === '<div></div>',\n\tdomToHtmlString(vDomToDom([A, { name: 'x' }])) === '<a name=\"x\"></a>',\n\tdomToHtmlString(vDomToDom([A, { href: '#' }, ['abc']])) === '<a href=\"#\"><span>abc</span></a>',\n\tdomToHtmlString(vDomToDom([Div, {}, [ 'a', [Div, {}, ['b']], 'c' ]])) === '<div><span>a</span><div><span>b</span></div><span>c</span></div>',\n\tdomToHtmlString(vDomToDom([Div, {}, ['a','b','c']])) === '<div><span>a</span><span>b</span><span>c</span></div>',\n\n\tcheckUpdate(parent, [Div, {}, []], [Div, {}, ['a']]),\n\tcheckUpdate(parent, [Div, {}, []], [Br]),\n\tcheckUpdate(parent, [Div], 'a'),\n\tcheckUpdate(parent, 'a', 'b'),\n\tcheckUpdate(parent, 'a', [Div]),\n\tcheckUpdate(parent, 1, 0),\n\tcheckUpdate(parent, [Div, {}, ['a','b','c']], [Div, {}, [123]])\n])\n\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/tests.js\n ** module id = 0\n ** module chunks = 0\n **/","var dift = require('dift')\n\n\n// Js types\nvar STRING          = 'string'\nvar NUMBER          = 'number'\nvar FUNCTION        = 'function'\n\n// Props\nvar KEY             = 'key'\nvar VALUE           = 'value'\nvar CHECKED         = 'checked'\nvar SELECTED        = 'selected'\nvar DISABLED        = 'disabled'\nvar FOCUS           = 'focus'\nvar ON              = 'on'\nvar EMPTYSTRING     = ''\n\n// Html\nvar VOID_ELEMENTS = { area:1, base:1, br:1, col:1, command:1, embed:1, hr:1, img:1, input:1, keygen:1, link:1, meta:1, param:1, source:1, track:1, wbr:1 }\n\n// vDomType\nvar VATOM   = 0\nvar VNODE   = 1\nvar VCHILD  = 2\nvar VNULL   = 3\n\n\n/*\nvAtom :: \n    String\n    Number\n\nvNode :: \n    [String] \n    [String, { attrs }] \n    [String, { attrs }, [vDom ...]] \n\nvChild ::\n    [Function, { params }, vNode?]\n\nvDom :: \n    vAtom\n    vNode\n    vChild\n    vNull\n*/\n\n\n// vDom -> vDomType\nfunction getType (vDom) {\n\n    if (vDom instanceof Array) {\n        return typeof vDom[0] === FUNCTION ? VCHILD : VNODE\n\n    } else if (typeof vDom === STRING || typeof vDom === NUMBER) {\n        return VATOM\n\n    } else {\n        return VNULL\n    }\n}\n\n\n// vDom -> int -> key\nfunction keyOf (v, i) {\n    return (v instanceof Array && v[1] && v[1].key) || i\n}\n\n\n// [vDom] -> [{ key: *, vDom: vDom, pos: i }]\nfunction groupChildren (vDoms, DChildren) {\n    var res = []\n    var v\n    var i\n    for (i = 0; i < vDoms.length; i++) {\n        v = vDoms[i]\n        if (!(v === false || v === undefined || v === null)) {\n            res.push({ key: keyOf(v, i), vDom: v, element: DChildren && DChildren[i] })\n        }\n    }\n    return res\n}\n\n\n// vDom -> key\nfunction getKey (v) { \n    return v.key \n}\n\n\n// [vDom] -> [vDom] -> domNode -> domNode\nfunction updateChildren (currentChildren, nextChildren, D) {\n\n    dift.default(\n\n        groupChildren(currentChildren, D.childNodes),\n        groupChildren(nextChildren),\n\n        function effect (type, current, next, pos) {\n\n            var newNode\n\n            switch (type){\n                case dift.CREATE: // null, new, posToCreate\n                    newNode = vDomToDom(next.vDom)\n                    if (newNode) D.insertBefore(newNode, D.childNodes[pos] || null)\n                    break\n\n                case dift.UPDATE: // old, new, null\n                    updateDom(current.vDom, next.vDom, current.element, D)\n                    break\n\n                case dift.MOVE: // old, new, newPos\n                    D.insertBefore(\n                        updateDom(current.vDom, next.vDom, current.element, D), \n                        current.element\n                    )\n                    break\n\n                case dift.REMOVE: // null, old, null\n                    D.removeChild(current.element)\n                    break\n            }\n        },\n\n        getKey\n    )\n\n    return D\n}\n\n\n// vDom -> vDom -> domNode -> domNode -> domNode\nfunction updateDom (current, next, D, DParent) {\n\n    if (D === undefined) { throw new Error('No dom node to update') }\n\n    if (current === next) { return }\n    \n    var currentExists = current !== undefined\n    var nextExists    = next !== undefined\n    var newNode\n\n    if (!currentExists && nextExists) {\n        newNode = vDomToDom(next)\n        if (newNode) { DParent.appendChild(newNode) }\n\n    } else if (currentExists && !nextExists) {\n        DParent.removeChild(D)\n\n    } else if (currentExists && nextExists) {\n\n        var currentType   = getType(current)\n        var nextType      = getType(next)\n\n        if (shouldExploreFurther(current, next, currentType, nextType)) {\n\n            switch (nextType) {\n\n                case VNODE:\n                    updateAttributes(current[1] || {}, next[1] || {}, D)\n                    updateChildren(current[2] || [], next[2] || [], D)\n                    break\n\n                case VCHILD:\n                    if (next[0].shouldUpdate ? \n                        next[0].shouldUpdate(current[1], next[1]) : \n                        next[1] && current[1] && next[1] !== current[1]) {\n\n                        next[2] = next[0](next[1])\n                        updateAttributes(current[2][1] || {}, next[2][1] || {}, D)\n                        updateChildren(current[2][2] || [], next[2][2] || [], D)\n\n                    } else {\n                        next[2] = current[2]\n                    }\n                    break\n            }\n\n        } else if (current !== next) {\n            newNode = vDomToDom(next)\n            if (newNode) { \n                DParent.replaceChild(newNode, D)\n            }\n        }\n    }\n\n    return D\n}\n\n\n// vDom -> vDom -> domNode -> domNode\nfunction updateAttributes (currentAttrs, nextAttrs, D) {\n\n    var a\n    var currentVal\n    var nextVal\n    var evt\n    var currentEvts = currentAttrs[ON]\n    var nextEvts    = nextAttrs[ON]\n\n    for (a in currentAttrs) { // remove all those not in B from A\n\n        currentVal = currentAttrs[a]\n        nextVal = nextAttrs[a]\n\n        if (nextVal === undefined || nextVal === null || nextVal === false) {\n\n            switch (a) {\n                case ON:\n                case KEY:\n                    break\n                case CHECKED:\n                case DISABLED:\n                case SELECTED:\n                    D[a] = false\n                    break\n                case VALUE:\n                    D.value = EMPTYSTRING\n                    break\n                case FOCUS:\n                    D.blur()\n                    break\n                default:\n                    D.removeAttribute(a)\n                    break    \n            }\n        }\n    } \n\n    for (a in nextAttrs) { // set all those in B to A\n\n        currentVal = currentAttrs[a]\n        nextVal = nextAttrs[a]\n\n        if (!(nextVal === undefined || nextVal === null || nextVal === false) && \n            nextVal !== currentVal &&\n            typeof nextVal !== FUNCTION) {\n\n            switch (a) {\n                case ON:\n                case KEY:\n                    break  \n                case CHECKED:\n                case DISABLED:\n                case SELECTED:\n                case VALUE:\n                    D[a] = nextVal\n                    break \n                case FOCUS:\n                    D.focus()\n                    break\n                default:\n                    D.setAttribute(a, nextVal)\n                    break\n            }\n        }\n    }\n\n    // update event listeners\n    if (currentEvts && !nextEvts) {\n        for (evt in currentEvts) {\n             D.removeEventListener(evt, currentEvts[evt])\n        }\n\n    } else if (!currentEvts && nextEvts) {\n        for (evt in nextEvts) {\n             D.addEventListener(evt, nextEvts[evt])\n        }\n\n    } else if (currentEvts && nextEvts) {\n        for (evt in currentEvts) {\n            if (!nextEvts[evt]) { \n                D.removeEventListener(evt, currentEvts[evt]) \n            }\n        }\n        for (evt in nextEvts) {\n            if (currentEvts[evt] !== nextEvts[evt]) {\n                if (currentEvts[evt]) {\n                    D.removeEventListener(evt, currentEvts[evt]) \n                }\n                D.addEventListener(evt, nextEvts[evt]) \n            }\n        }\n    }\n\n    return D\n}\n\n\n// vDom -> vDom -> vType -> vType -> bool\nfunction shouldExploreFurther (current, next, currentType, nextType) {\n    return currentType === nextType &&\n            (currentType === VNODE || currentType === VCHILD) &&\n            current[0] === next[0]\n}\n\n\n// vDom -> HtmlString\nfunction vDomToHtmlString (vDom) {\n\n    switch (getType(vDom)) {\n\n        case VCHILD:\n            vDom[2] = vDom[0](vDom[1])\n            return vNodeToHtmlString(vDom[2])\n\n        case VNODE:\n            return vNodeToHtmlString(vDom)\n\n        case VATOM:\n            return '<span>' + vDom + '</span>'\n\n        default:\n            return ''\n    }\n}\n\n\n// vDom -> HtmlString\nfunction vNodeToHtmlString (vDom) {\n\n    var tag = vDom[0]\n    var attrs = vDom[1]\n    var children = vDom[2] || []\n    var val\n    var a\n    var attrPairs = []\n    var c\n    var res\n\n    if (attrs) {\n        for (a in attrs) {\n            val = attrs[a]\n            if (!(val === undefined || val === null || val === false) && a !== KEY && a !== ON) { \n                attrPairs.push(a + '=\"' + val + '\"') \n            }\n        }\n    }\n\n    res = '<' + [tag].concat(attrPairs).join(' ') + '>'\n\n    if (!VOID_ELEMENTS[tag]) {\n        for (c = 0; c < children.length; c++) { \n            if (!(c === undefined || c === null || c === false)) {\n                res += vDomToHtmlString(children[c]) \n            }\n        }\n        res += '</' + tag + '>'\n    }\n\n    return res\n}\n\n\n// vDom -> domNode || undefined\nfunction vDomToDom (vDom) {\n\n    switch (getType(vDom)) {\n\n        case VATOM:\n        case VNODE:\n        case VCHILD: // child rendering is handled by vDomToHtmlString\n\n            if (vDom.length === 0) return undefined\n\n            var el = document.createElement('div')\n            el.innerHTML = vDomToHtmlString(vDom)\n            var dom = el.firstChild\n            bindEvents(vDom, dom)\n            return dom\n\n        case VNULL:\n            return undefined\n    }\n}\n\n\n\n// vDom -> domNode -> _\nfunction bindEvents (vDom, D) {\n\n    var vType = getType(vDom)\n    var vNode\n    var vAttrs\n    var evts\n    var evt\n    var child\n    var children\n\n    if (vType === VATOM || vType === VNULL) { return }\n\n    vNode    = vType === VCHILD ? vDom[2] : vDom\n    vAttrs   = vNode[1]\n    children = vNode[2]\n\n    if (vAttrs) {\n        evts = vAttrs[ON]\n        if (evts) {\n            for (evt in evts) {\n                 D.addEventListener(evt, evts[evt])\n            }\n        }\n    }\n\n    if (children) {\n        for (child = 0; child < children.length; child++) {\n            bindEvents(children[child], D.childNodes[child])\n        }\n    }\n}\n\n\n\nmodule.exports = {\n    vDomToHtmlString: vDomToHtmlString,\n    vDomToDom: vDomToDom,\n    updateDom: updateDom\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 1\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.REMOVE = exports.MOVE = exports.UPDATE = exports.CREATE = undefined;\n\nvar _bitVector = require('bit-vector');\n\n/**\n * Actions\n */\n\nvar CREATE = 0; /**\n                 * Imports\n                 */\n\nvar UPDATE = 1;\nvar MOVE = 2;\nvar REMOVE = 3;\n\n/**\n * dift\n */\n\nfunction dift(prev, next, effect, key) {\n  var pStartIdx = 0;\n  var nStartIdx = 0;\n  var pEndIdx = prev.length - 1;\n  var nEndIdx = next.length - 1;\n  var pStartItem = prev[pStartIdx];\n  var nStartItem = next[nStartIdx];\n\n  // List head is the same\n  while (pStartIdx <= pEndIdx && nStartIdx <= nEndIdx && equal(pStartItem, nStartItem)) {\n    effect(UPDATE, pStartItem, nStartItem, nStartIdx);\n    pStartItem = prev[++pStartIdx];\n    nStartItem = next[++nStartIdx];\n  }\n\n  // The above case is orders of magnitude more common than the others, so fast-path it\n  if (nStartIdx > nEndIdx && pStartIdx > pEndIdx) {\n    return;\n  }\n\n  var pEndItem = prev[pEndIdx];\n  var nEndItem = next[nEndIdx];\n  var movedFromFront = 0;\n\n  // Reversed\n  while (pStartIdx <= pEndIdx && nStartIdx <= nEndIdx && equal(pStartItem, nEndItem)) {\n    effect(MOVE, pStartItem, nEndItem, pEndIdx - movedFromFront + 1);\n    pStartItem = prev[++pStartIdx];\n    nEndItem = next[--nEndIdx];\n    ++movedFromFront;\n  }\n\n  // Reversed the other way (in case of e.g. reverse and append)\n  while (pEndIdx >= pStartIdx && nStartIdx <= nEndIdx && equal(nStartItem, pEndItem)) {\n    effect(MOVE, pEndItem, nStartItem, nStartIdx);\n    pEndItem = prev[--pEndIdx];\n    nStartItem = next[++nStartIdx];\n    --movedFromFront;\n  }\n\n  // List tail is the same\n  while (pEndIdx >= pStartIdx && nEndIdx >= nStartIdx && equal(pEndItem, nEndItem)) {\n    effect(UPDATE, pEndItem, nEndItem, nEndIdx);\n    pEndItem = prev[--pEndIdx];\n    nEndItem = next[--nEndIdx];\n  }\n\n  if (pStartIdx > pEndIdx) {\n    while (nStartIdx <= nEndIdx) {\n      effect(CREATE, null, nStartItem, nStartIdx);\n      nStartItem = next[++nStartIdx];\n    }\n\n    return;\n  }\n\n  if (nStartIdx > nEndIdx) {\n    while (pStartIdx <= pEndIdx) {\n      effect(REMOVE, pStartItem);\n      pStartItem = prev[++pStartIdx];\n    }\n\n    return;\n  }\n\n  var created = 0;\n  var pivotDest = null;\n  var pivotIdx = pStartIdx - movedFromFront;\n  var keepBase = pStartIdx;\n  var keep = (0, _bitVector.createBv)(pEndIdx - pStartIdx);\n\n  var prevMap = keyMap(prev, pStartIdx, pEndIdx + 1, key);\n\n  for (; nStartIdx <= nEndIdx; nStartItem = next[++nStartIdx]) {\n    var oldIdx = prevMap[key(nStartItem)];\n\n    if (isUndefined(oldIdx)) {\n      effect(CREATE, null, nStartItem, pivotIdx++);\n      ++created;\n    } else if (pStartIdx !== oldIdx) {\n      (0, _bitVector.setBit)(keep, oldIdx - keepBase);\n      effect(MOVE, prev[oldIdx], nStartItem, pivotIdx++);\n    } else {\n      pivotDest = nStartIdx;\n    }\n  }\n\n  if (pivotDest !== null) {\n    (0, _bitVector.setBit)(keep, 0);\n    effect(MOVE, prev[pStartIdx], next[pivotDest], pivotDest);\n  }\n\n  // If there are no creations, then you have to\n  // remove exactly max(prevLen - nextLen, 0) elements in this\n  // diff. You have to remove one more for each element\n  // that was created. This means once we have\n  // removed that many, we can stop.\n  var necessaryRemovals = prev.length - next.length + created;\n  for (var removals = 0; removals < necessaryRemovals; pStartItem = prev[++pStartIdx]) {\n    if (!(0, _bitVector.getBit)(keep, pStartIdx - keepBase)) {\n      effect(REMOVE, pStartItem);\n      ++removals;\n    }\n  }\n\n  function equal(a, b) {\n    return key(a) === key(b);\n  }\n}\n\nfunction isUndefined(val) {\n  return typeof val === 'undefined';\n}\n\nfunction keyMap(items, start, end, key) {\n  var map = {};\n\n  for (var i = start; i < end; ++i) {\n    map[key(items[i])] = i;\n  }\n\n  return map;\n}\n\n/**\n * Exports\n */\n\nexports.default = dift;\nexports.CREATE = CREATE;\nexports.UPDATE = UPDATE;\nexports.MOVE = MOVE;\nexports.REMOVE = REMOVE;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/dift/lib/index.js\n ** module id = 2\n ** module chunks = 0\n **/","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * Use typed arrays if we can\n */\n\nvar FastArray = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\n\n/**\n * Bit vector\n */\n\nfunction createBv(sizeInBits) {\n  return new FastArray(Math.ceil(sizeInBits / 32));\n}\n\nfunction setBit(v, idx) {\n  var r = idx % 32;\n  var pos = (idx - r) / 32;\n\n  v[pos] |= 1 << r;\n}\n\nfunction clearBit(v, idx) {\n  var r = idx % 32;\n  var pos = (idx - r) / 32;\n\n  v[pos] &= ~(1 << r);\n}\n\nfunction getBit(v, idx) {\n  var r = idx % 32;\n  var pos = (idx - r) / 32;\n\n  return !!(v[pos] & 1 << r);\n}\n\n/**\n * Exports\n */\n\nexports.createBv = createBv;\nexports.setBit = setBit;\nexports.clearBit = clearBit;\nexports.getBit = getBit;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/bit-vector/lib/index.js\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}